import{a as u,o as n,b as r,e as t,t as l,F as f,r as p,f as _,h as m,i as S,p as b,j as g,c as $,k as I}from"./entry.a46d8285.js";function v(e){if(typeof e!="string")return;let a=new Date(e).getTime(),d=Math.floor((new Date-a)/1e3),o=d/31536e3;return o>1?Math.floor(o)+" years":(o=d/2592e3,o>1?Math.floor(o)+" months":(o=d/86400,o>1?Math.floor(o)+" days":(o=d/3600,o>1?Math.floor(o)+" hours":(o=d/60,o>1?Math.floor(o)+" minutes":Math.floor(d)+" seconds"))))}const C={props:{chatId:{type:String,default:null}},data(){return{room:null}},computed:{messages(){return this.room.stories.edges},shortSenderName(){const e=this.room.roomName;return`${e.split(" ")[0]} ${e.split(" ")[1][0]}.`}},methods:{goBack(){this.$emit("goBack",!0)},getTimeSince(e){return v(e)}},mounted(){fetch("https://8d0e-78-162-150-126.ngrok-free.app/rooms/"+this.chatId+"/stories?"+new URLSearchParams({token:"Bearer oauth2v2_4ebae8c9336ae72076a77e30788c4be4"}),{method:"GET",headers:{"ngrok-skip-browser-warning":!0}}).then(e=>e.json()).then(e=>{var a;return this.room=(a=e==null?void 0:e.data)==null?void 0:a.room}).catch(e=>console.error(e))}},k=e=>(b("data-v-c031f1e3"),e=e(),g(),e),N={key:0,class:"col-md-6 col-lg-7 col-xl-8"},B={class:"list-unstyled"},T={class:"font-weight-bold mb-3 text-center text-lg-start"},M=["src"],j={key:1,class:"card"},D={class:"card-header d-flex justify-content-between p-3"},U={class:"fw-bold mb-0 margin-right-5"},E={class:"text-muted small mb-0"},L=k(()=>t("i",{class:"far fa-clock"},null,-1)),V={class:"card-body"},G={class:"mb-0"},A={key:2,class:"card w-100"},P={class:"card-header d-flex justify-content-between p-3"},F={class:"fw-bold mb-0"},R={class:"text-muted small mb-0 margin-right-5"},q=k(()=>t("i",{class:"far fa-clock"},null,-1)),z={class:"card-body"},H={class:"mb-0"},J=["src"],K=S('<li class="bg-white mb-3" data-v-c031f1e3><div class="form-outline" data-v-c031f1e3><textarea class="form-control" id="textAreaExample2" rows="4" data-v-c031f1e3></textarea><label class="form-label" for="textAreaExample2" data-v-c031f1e3>Message</label></div></li><button type="button" class="btn btn-primary btn-rounded float-end" data-v-c031f1e3> Send </button>',2);function Q(e,a,d,o,i,c){return i.room?(n(),r("div",N,[t("button",{class:"btn btn-info back-btn",onClick:a[0]||(a[0]=s=>c.goBack())},"Back"),t("ul",B,[t("h5",T,l(i.room.roomName),1),(n(!0),r(f,null,p(c.messages,s=>(n(),r("li",{class:"d-flex justify-content-between mb-4",key:s.node.id},[c.shortSenderName===s.node.user.name?(n(),r("img",{key:0,src:s.node.user.photoUrl,alt:"avatar",class:"rounded-circle d-flex align-self-start me-3 shadow-1-strong",width:"60"},null,8,M)):_("",!0),c.shortSenderName===s.node.user.name?(n(),r("div",j,[t("div",D,[t("p",U,l(s.node.user.name),1),t("p",E,[L,m(" "+l(c.getTimeSince(s.node.createdDateTime))+" ago ",1)])]),t("div",V,[t("p",G,l(s.node.message),1)])])):_("",!0),c.shortSenderName!==s.node.user.name?(n(),r("div",A,[t("div",P,[t("p",F,l(s.node.user.name),1),t("p",R,[q,m(" "+l(c.getTimeSince(s.node.createdDateTime))+" ago ",1)])]),t("div",z,[t("p",H,l(s.node.message),1)])])):_("",!0),c.shortSenderName!==s.node.user.name?(n(),r("img",{key:3,src:s.node.user.photoUrl,alt:"avatar",class:"rounded-circle d-flex align-self-start ms-3 shadow-1-strong",width:"60"},null,8,J)):_("",!0)]))),128)),K])])):_("",!0)}const w=u(C,[["render",Q],["__scopeId","data-v-c031f1e3"]]);const W={components:{chat:w},data(){return{selectedChatId:null,list:null}},mounted(){fetch("https://8d0e-78-162-150-126.ngrok-free.app/rooms?"+new URLSearchParams({token:"Bearer oauth2v2_4ebae8c9336ae72076a77e30788c4be4"}),{method:"GET",headers:{"ngrok-skip-browser-warning":!0}}).then(e=>e.json()).then(e=>{var a,d;return this.list=(d=(a=e==null?void 0:e.data)==null?void 0:a.roomList)==null?void 0:d.edges}).catch(e=>console.error(e))},methods:{getTimeSince(e){return v(e)},openChat(e){this.selectedChatId=e},clearSelectedChatId(){this.selectedChatId=null},truncateMessage(e="",a=50){return e.length>a?`${e.substring(0,a)}â€¦`:e}}},x=e=>(b("data-v-472de309"),e=e(),g(),e),X={class:"container py-5"},Y={key:0,id:"loading"},Z={key:1,class:"row"},O={class:"col-md-6 col-lg-5 col-xl-4 mb-4 mb-md-0"},ee=x(()=>t("h5",{class:"font-weight-bold mb-3 text-center text-lg-start"},[t("img",{class:"up-logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Upwork-logo.svg/2560px-Upwork-logo.svg.png",alt:"upwork-logo"})],-1)),te={class:"list-unstyled mb-0"},se=["onClick"],oe={href:"#!",class:"d-flex justify-content-between"},ae={class:"d-flex flex-row"},ce=x(()=>t("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-8.webp",alt:"avatar",class:"rounded-circle d-flex align-self-center me-3 shadow-1-strong",width:"60"},null,-1)),ne={class:"pt-1"},re={class:"fw-bold mb-0"},de={class:"small text-muted"},le={class:"pt-1"},ie={class:"small text-muted mb-1"};function _e(e,a,d,o,i,c){const s=w;return n(),r("div",X,[i.list?_("",!0):(n(),r("div",Y)),i.selectedChatId?_("",!0):(n(),r("div",Z,[t("div",O,[ee,t("ul",te,[(n(!0),r(f,null,p(i.list,h=>(n(),r("li",{key:h.id,class:"p-2 border-bottom up-chat-item",onClick:me=>c.openChat(h.node.id)},[t("a",oe,[t("div",ae,[ce,t("div",ne,[t("p",re,l(h.node.roomName),1),t("p",de,l(c.truncateMessage(h.node.latestStory.message)),1)])]),t("div",le,[t("p",ie,l(c.getTimeSince(h.node.latestStory.createdDateTime)),1)])])],8,se))),128))])])])),i.selectedChatId?(n(),$(s,{key:2,chatId:i.selectedChatId,onGoBack:c.clearSelectedChatId},null,8,["chatId","onGoBack"])):_("",!0)])}const y=u(W,[["render",_e],["__scopeId","data-v-472de309"]]),he={components:{chatList:y}};function ue(e,a,d,o,i,c){const s=y;return n(),r("main",null,[I(s)])}const pe=u(he,[["render",ue]]);export{pe as default};
